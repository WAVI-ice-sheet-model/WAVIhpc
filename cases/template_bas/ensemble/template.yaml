---
ensemble:
  vars:                 {}

  pre_process:          []
  post_process:         []

  batch_config:
    templatedir:  TEMPLATE
    templates:
      - input/driver.jl.j2
      - scripts/run_ensemble_member.j2
    email:        jambyr@bas.ac.uk
    job_file:     scripts/run_ensemble_member
    cluster:      short
    nodes:        1
    ntasks:       8
    length:       00:03:00
    maxruns:      4
    maxjobs:      4

  batches:
    - name:       NAME
      basedir:    ./cases
      repeat:     True
      pre_batch:  []
      pre_run:
        - name:   check
          args:
            cmd:  ../scripts/BAS/pre_run.sh /data/icesheet_output/${USER}/WAVIhpc
            fail: True
        - name:   quota
          args:
            atleast:  1073741824
      runs:
      - thickness: 100.0
        accumulation: 0.1
      - thickness: 100.0
        accumulation: 0.2
      - thickness: 100.0
        accumulation: 0.3
      - thickness: 100.0
        accumulation: 0.4
      - thickness: 100.0
        accumulation: 0.5
      - thickness: 100.0
        accumulation: 0.6
      - thickness: 100.0
        accumulation: 0.7
      - thickness: 100.0
        accumulation: 0.8
      - thickness: 100.0
        accumulation: 0.9
      - thickness: 200.0
        accumulation: 0.1
      - thickness: 200.0
        accumulation: 0.2
      - thickness: 200.0
        accumulation: 0.3
      - thickness: 200.0
        accumulation: 0.4
      - thickness: 200.0
        accumulation: 0.5
      - thickness: 200.0
        accumulation: 0.6
      - thickness: 200.0
        accumulation: 0.7
      - thickness: 200.0
        accumulation: 0.8
      - thickness: 200.0
        accumulation: 0.9
      - thickness: 300.0
        accumulation: 0.1
      - thickness: 300.0
        accumulation: 0.2
      - thickness: 300.0
        accumulation: 0.3
      - thickness: 300.0
        accumulation: 0.4
      - thickness: 300.0
        accumulation: 0.5
      - thickness: 300.0
        accumulation: 0.6
      - thickness: 300.0
        accumulation: 0.7
      - thickness: 300.0
        accumulation: 0.8
      - thickness: 300.0
        accumulation: 0.9
      - thickness: 400.0
        accumulation: 0.1
      - thickness: 400.0
        accumulation: 0.2
      - thickness: 400.0
        accumulation: 0.3
      - thickness: 400.0
        accumulation: 0.4
      - thickness: 400.0
        accumulation: 0.5
      - thickness: 400.0
        accumulation: 0.6
      - thickness: 400.0
        accumulation: 0.7
      - thickness: 400.0
        accumulation: 0.8
      - thickness: 400.0
        accumulation: 0.9
      - thickness: 500.0
        accumulation: 0.1
      - thickness: 500.0
        accumulation: 0.2
      - thickness: 500.0
        accumulation: 0.3
      - thickness: 500.0
        accumulation: 0.4
      - thickness: 500.0
        accumulation: 0.5
      - thickness: 500.0
        accumulation: 0.6
      - thickness: 500.0
        accumulation: 0.7
      - thickness: 500.0
        accumulation: 0.8
      - thickness: 500.0
        accumulation: 0.9
      - thickness: 600.0
        accumulation: 0.1
      - thickness: 600.0
        accumulation: 0.2
      - thickness: 600.0
        accumulation: 0.3
      - thickness: 600.0
        accumulation: 0.4
      - thickness: 600.0
        accumulation: 0.5
      - thickness: 600.0
        accumulation: 0.6
      - thickness: 600.0
        accumulation: 0.7
      - thickness: 600.0
        accumulation: 0.8
      - thickness: 600.0
        accumulation: 0.9
      - thickness: 700.0
        accumulation: 0.1
      - thickness: 700.0
        accumulation: 0.2
      - thickness: 700.0
        accumulation: 0.3
      - thickness: 700.0
        accumulation: 0.4
      - thickness: 700.0
        accumulation: 0.5
      - thickness: 700.0
        accumulation: 0.6
      - thickness: 700.0
        accumulation: 0.7
      - thickness: 700.0
        accumulation: 0.8
      - thickness: 700.0
        accumulation: 0.9
      - thickness: 800.0
        accumulation: 0.1
      - thickness: 800.0
        accumulation: 0.2
      - thickness: 800.0
        accumulation: 0.3
      - thickness: 800.0
        accumulation: 0.4
      - thickness: 800.0
        accumulation: 0.5
      - thickness: 800.0
        accumulation: 0.6
      - thickness: 800.0
        accumulation: 0.7
      - thickness: 800.0
        accumulation: 0.8
      - thickness: 800.0
        accumulation: 0.9
      - thickness: 900.0
        accumulation: 0.1
      - thickness: 900.0
        accumulation: 0.2
      - thickness: 900.0
        accumulation: 0.3
      - thickness: 900.0
        accumulation: 0.4
      - thickness: 900.0
        accumulation: 0.5
      - thickness: 900.0
        accumulation: 0.6
      - thickness: 900.0
        accumulation: 0.7
      - thickness: 900.0
        accumulation: 0.8
      - thickness: 900.0
        accumulation: 0.9
      - thickness: 1000.0
        accumulation: 0.1
      - thickness: 1000.0
        accumulation: 0.2
      - thickness: 1000.0
        accumulation: 0.3
      - thickness: 1000.0
        accumulation: 0.4
      - thickness: 1000.0
        accumulation: 0.5
      - thickness: 1000.0
        accumulation: 0.6
      - thickness: 1000.0
        accumulation: 0.7
      - thickness: 1000.0
        accumulation: 0.8
      - thickness: 1000.0
        accumulation: 0.9
      post_run:
        - name:     check
          args:
            cmd:    /usr/bin/test -f run/outfile.nc
            fail:   True
        - name:     move
          args:
            dest:   "/data/icesheet_output/${USER}/WAVIhpc"
        - name:     remove
      post_batch:
        - name:     check
          args:
            cmd:    ../../scripts/BAS/post_batch.sh /data/icesheet_output/${USER}/WAVIhpc NAME
            fail:   True
